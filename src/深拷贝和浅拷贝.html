<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>深拷贝和浅拷贝的区别</title>
</head>

<body>

</body>
<script>
    /**
     *20180909
     */
    /**
     *深拷贝,a对象的值变化不会改变b对象值的变化
     *
     */
    //被复制的对象
    var obj1 = {
        name: '红红',
        age: '24',
        color: ['blue', 'red', 'black'],
        obj: {
            book: 'javascript高级程序设计',
            dog: '小花'
        }
    }

    //另一个对象
    var obj2 = {};
    /**
     *浅拷贝 a对象值改变后,b对象的值随之改变
     *把一个对象复制到另一个对象中,把a对象的所有属性复制到另一个对象中
     */

    function copyObj(a, b) {
        for (var key in a) {
            b[key] = a[key];
        }
    }
    //浅拷贝,obj1属性的值改变会影响到obj2属性的值
    copyObj(obj1, obj2);
    //console.dir用于输出对象
    // obj1.obj[1] = "小花的名字已改变";
    console.dir(obj1);
    console.dir(obj2);
    /**
     *深拷贝 
     * 
     */
    function extend(a, b) {
        for (var key in a) {
            var item = a[key];
            //是否是对象
            if (item instanceof Object) {
                //如果是对象,在b对象中新增一个属性,并且这个属性是空对象
                b[key] = {};
                //递归,把a对象的对象属性的值一个一个的复制到b对象的对象属性中
                extend(item, b[key]);
            } else if (item instanceof Array) { //判断
                //是否是数组,在b对象中新增一个属性,并且这个属性也是数组
                b[key] = [];
                //递归,把a对象中的这个数组的值一个一个的复制到b对象这个数组的属性中
                extent(item, b[key]);
            } else {
                b[key] = a[key];
            }
        }
    }
    //深拷贝,obj1属性的值改变后不会影响到obj2属性的值
    extend(obj1, obj2);
    obj1.obj[1] = "小花的名字已改变";
    console.dir(obj1);
    console.dir(obj2);
</script>

</html>